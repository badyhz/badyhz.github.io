<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>人格与星座综合测试</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            padding: 30px 20px;
        }
        h1 {
            font-size: 2.2em;
            margin-bottom: 8px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        .subtitle {
            font-size: 1.1em;
            opacity: 0.9;
        }
        .content {
            padding: 30px;
        }
        .progress {
            height: 4px;
            background: #e9ecef;
            border-radius: 2px;
            margin: 20px 0;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            width: 0%;
            transition: width 0.3s ease;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            color: #2c3e50;
            font-weight: 600;
        }
        .date-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }
        .date-input:focus {
            outline: none;
            border-color: #4facfe;
        }
        .question {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            border-left: 4px solid #4facfe;
        }
        .question h3 {
            font-size: 1.1em;
            color: #2c3e50;
            margin-bottom: 15px;
        }
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .option {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 12px 10px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
        }
        .option:hover {
            border-color: #4facfe;
            background: #f0f7ff;
        }
        .option.selected {
            border-color: #4facfe;
            background: #e3f2fd;
            color: #1976d2;
            font-weight: 600;
        }
        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 14px 30px;
            font-size: 1.1em;
            border-radius: 40px;
            cursor: pointer;
            display: block;
            margin: 25px auto 0;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 8px 16px rgba(102, 126, 234, 0.3);
            width: 100%;
        }
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 20px rgba(102, 126, 234, 0.4);
        }
        .submit-btn:active {
            transform: translateY(0);
        }
        .back-btn {
            background: #6c757d;
            box-shadow: 0 8px 16px rgba(108, 117, 125, 0.3);
        }
        .back-btn:hover {
            background: #5a6268;
        }
        .results {
            padding: 18px;
            margin-top: 20px;
        }
        .results h2 {
            font-size: 1.4em;
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
        }
        .result-item {
            background: #f8f9ff;
            padding: 12px;
            border-radius: 12px;
            margin-bottom: 15px;
            border-left: 4px solid #4facfe;
        }
        .result-item h3 {
            font-size: 1.1em;
            color: #2c3e50;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
        }
        .result-item h3 i {
            margin-right: 8px;
            font-size: 1.1em;
        }
        .bar-container {
            height: 18px;
            background: #e9ecef;
            border-radius: 9px;
            margin: 10px 0;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }
        .bar {
            height: 100%;
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            text-align: center;
            color: white;
            line-height: 18px;
            font-size: 0.8em;
            font-weight: 500;
            transition: width 1.5s ease-in-out;
        }
        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
        }
        .tag {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            color: #333;
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 0.85em;
            font-weight: 500;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .dimension-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            font-size: 0.85em;
        }
        .dimension-table th, .dimension-table td {
            padding: 6px 8px;
            text-align: center;
            border-bottom: 1px solid #e9ecef;
        }
        .dimension-table th {
            background: #4facfe;
            color: white;
            font-weight: 600;
        }
        .dimension-table tr:nth-child(even) {
            background: #f8f9ff;
        }
        .special-mechanism {
            padding: 8px;
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            border-radius: 0 8px 8px 0;
        }
        .special-mechanism h4 {
            font-size: 0.95em;
            color: #856404;
            margin-bottom: 4px;
        }
        .special-mechanism p {
            font-size: 0.85em;
            color: #856404;
        }
        /* 新增页面样式：后天与行为标签 */
        .post-test-page {
            display: none; /* 默认隐藏 */
            padding: 20px;
        }
        .post-test-header {
            text-align: center;
            margin-bottom: 25px;
        }
        .post-test-header h2 {
            font-size: 1.8em;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        .post-test-header p {
            color: #666;
            font-size: 1em;
        }
        .tag-section {
            background: #f8f9ff;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
            border-left: 4px solid #4facfe;
        }
        .section-title {
            font-size: 1.4em;
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        .section-title i {
            margin-right: 10px;
            font-size: 1.2em;
        }
        .tag-group {
            margin-bottom: 20px;
        }
        .tag-group h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
            display: flex;
            align-items: center;
        }
        .tag-group h3 i {
            margin-right: 8px;
            font-size: 1.2em;
        }
        .tag-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 12px;
        }
        .tag-option {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 10px 8px;
            text-align: center;
            cursor: pointer;
            font-size: 0.95em;
            transition: all 0.3s ease;
        }
        .tag-option:hover {
            border-color: #4facfe;
            background: #f0f7ff;
        }
        .tag-option.selected {
            border-color: #4facfe;
            background: #e3f2fd;
            color: #1976d2;
            font-weight: 600;
        }
        .tag-option.single-selected {
            background: #4facfe;
            color: white;
            border-color: #4facfe;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 12px;
            }
            .content {
                padding: 20px;
            }
            header {
                padding: 20px 15px;
            }
            h1 {
                font-size: 1.8em;
            }
            .subtitle {
                font-size: 0.95em;
            }
            .question {
                padding: 16px;
            }
            .question h3 {
                font-size: 1.1em;
            }
            .options {
                flex-direction: column;
                gap: 10px;
            }
            .option {
                padding: 12px 10px;
                font-size: 1em;
            }
            .submit-btn {
                padding: 14px 20px;
                font-size: 1.1em;
                width: 100%;
            }
            .results {
                padding: 18px;
                margin-top: 20px;
            }
            .results h2 {
                font-size: 1.4em;
            }
            .result-item {
                padding: 12px;
            }
            .result-item h3 {
                font-size: 1.1em;
            }
            .bar-container {
                height: 18px;
            }
            .bar {
                line-height: 18px;
                font-size: 0.8em;
            }
            .tags {
                gap: 6px;
            }
            .tag {
                padding: 5px 10px;
                font-size: 0.8em;
            }
            .dimension-table {
                font-size: 0.85em;
            }
            .dimension-table th, .dimension-table td {
                padding: 6px 8px;
            }
            .special-mechanism {
                padding: 8px;
            }
            .special-mechanism h4 {
                font-size: 0.95em;
            }
            .progress {
                height: 4px;
                margin: 15px 0;
            }
        }

        /* 小屏幕特殊优化 */
        @media (max-width: 360px) {
            body {
                padding: 10px;
            }
            .container {
                margin: 5px;
            }
            header {
                padding: 15px 8px;
            }
            h1 {
                font-size: 1.6em;
            }
            .subtitle {
                font-size: 0.85em;
            }
            .content {
                padding: 15px 8px;
            }
            .question {
                padding: 12px;
            }
            .question h3 {
                font-size: 1em;
            }
            .option {
                padding: 10px 8px;
                font-size: 0.9em;
            }
            .submit-btn {
                padding: 12px 15px;
                font-size: 1em;
            }
            .results {
                padding: 15px;
            }
            .results h2 {
                font-size: 1.3em;
            }
            .result-item {
                padding: 10px;
            }
            .result-item h3 {
                font-size: 1em;
            }
            .bar {
                font-size: 0.75em;
            }
            .tag {
                padding: 4px 8px;
                font-size: 0.75em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>人格与星座综合测试</h1>
            <p class="subtitle">基于40个性格标签的深度人格分析</p>
        </header>
        <div class="content">
            <!-- 第一页：性格测试 -->
            <form id="personality-form" class="active-page">
                <div class="progress">
                    <div class="progress-bar" id="progress-bar"></div>
                </div>
                <div class="form-group">
                    <label for="dob">请输入你的出生日期：</label>
                    <input type="date" id="dob" class="date-input" required>
                </div>
                <div id="questions-container">
                    <!-- 问题将通过JavaScript动态生成 -->
                </div>
                <button type="button" id="nextToPostTestBtn" class="submit-btn">进入下一步</button>
            </form>

            <!-- 新增页面：后天与行为标签 -->
            <div id="post-test-page" class="post-test-page">
                <div class="post-test-header">
                    <h2>完善你的个人画像</h2>
                    <p>请选择以下标签，让分析更精准</p>
                </div>
                <div class="tag-section">
                    <h2 class="section-title"><i>🔄</i> 后天标签（动态雕刻）</h2>
                    <div class="tag-group">
                        <h3><i>🧠</i> MBTI</h3>
                        <div class="tag-options" id="mbti-options">
                            <div class="tag-option" data-tag="INTJ">INTJ</div>
                            <div class="tag-option" data-tag="INTP">INTP</div>
                            <div class="tag-option" data-tag="ENTJ">ENTJ</div>
                            <div class="tag-option" data-tag="ENTP">ENTP</div>
                            <div class="tag-option" data-tag="INFJ">INFJ</div>
                            <div class="tag-option" data-tag="INFP">INFP</div>
                            <div class="tag-option" data-tag="ENFJ">ENFJ</div>
                            <div class="tag-option" data-tag="ENFP">ENFP</div>
                            <div class="tag-option" data-tag="ISTJ">ISTJ</div>
                            <div class="tag-option" data-tag="ISFJ">ISFJ</div>
                            <div class="tag-option" data-tag="ESTJ">ESTJ</div>
                            <div class="tag-option" data-tag="ESFJ">ESFJ</div>
                            <div class="tag-option" data-tag="ISTP">ISTP</div>
                            <div class="tag-option" data-tag="ISFP">ISFP</div>
                            <div class="tag-option" data-tag="ESTP">ESTP</div>
                            <div class="tag-option" data-tag="ESFP">ESFP</div>
                        </div>
                    </div>
                    <div class="tag-group">
                        <h3><i>💉</i> 血型</h3>
                        <div class="tag-options" id="blood-options">
                            <div class="tag-option" data-tag="A型">A型</div>
                            <div class="tag-option" data-tag="B型">B型</div>
                            <div class="tag-option" data-tag="O型">O型</div>
                            <div class="tag-option" data-tag="AB型">AB型</div>
                        </div>
                    </div>
                    <div class="tag-group">
                        <h3><i>⚡</i> 关键事件</h3>
                        <div class="tag-options" id="event-options">
                            <div class="tag-option" data-tag="重大失败">重大失败</div>
                            <div class="tag-option" data-tag="突遇贵人">突遇贵人</div>
                            <div class="tag-option" data-tag="移民经历">移民经历</div>
                            <div class="tag-option" data-tag="自然灾害">自然灾害</div>
                            <div class="tag-option" data-tag="重大疾病">重大疾病</div>
                            <div class="tag-option" data-tag="意外财富">意外财富</div>
                            <div class="tag-option" data-tag="创业成功">创业成功</div>
                            <div class="tag-option" data-tag="家庭变故">家庭变故</div>
                            <div class="tag-option" data-tag="教育转折">教育转折</div>
                            <div class="tag-option" data-tag="长期异地">长期异地</div>
                            <div class="tag-option" data-tag="法律纠纷">法律纠纷</div>
                            <div class="tag-option" data-tag="艺术启蒙">艺术启蒙</div>
                            <div class="tag-option" data-tag="宗教体验">宗教体验</div>
                            <div class="tag-option" data-tag="军事服役">军事服役</div>
                            <div class="tag-option" data-tag="网络走红">网络走红</div>
                            <div class="tag-option" data-tag="学术突破">学术突破</div>
                            <div class="tag-option" data-tag="职业转型">职业转型</div>
                            <div class="tag-option" data-tag="文化冲击">文化冲击</div>
                            <div class="tag-option" data-tag="重大获奖">重大获奖</div>
                            <div class="tag-option" data-tag="创伤经历">创伤经历</div>
                        </div>
                    </div>
                    <div class="tag-group">
                        <h3><i>💼</i> 职业烙印</h3>
                        <div class="tag-options" id="career-options">
                            <div class="tag-option" data-tag="程序员">程序员</div>
                            <div class="tag-option" data-tag="销售">销售</div>
                            <div class="tag-option" data-tag="艺术家">艺术家</div>
                            <div class="tag-option" data-tag="医生">医生</div>
                            <div class="tag-option" data-tag="教师">教师</div>
                            <div class="tag-option" data-tag="军人">军人</div>
                            <div class="tag-option" data-tag="企业家">企业家</div>
                            <div class="tag-option" data-tag="自由职业">自由职业</div>
                            <div class="tag-option" data-tag="设计师">设计师</div>
                            <div class="tag-option" data-tag="记者">记者</div>
                            <div class="tag-option" data-tag="金融分析师">金融分析师</div>
                            <div class="tag-option" data-tag="科研人员">科研人员</div>
                            <div class="tag-option" data-tag="公务员">公务员</div>
                            <div class="tag-option" data-tag="工程师">工程师</div>
                            <div class="tag-option" data-tag="演员">演员</div>
                            <div class="tag-option" data-tag="心理咨询师">心理咨询师</div>
                        </div>
                    </div>
                    <div class="tag-group">
                        <h3><i>🏛️</i> 社会阶层</h3>
                        <div class="tag-options" id="class-options">
                            <div class="tag-option" data-tag="寒门出身">寒门出身</div>
                            <div class="tag-option" data-tag="中产家庭">中产家庭</div>
                            <div class="tag-option" data-tag="富裕阶层">富裕阶层</div>
                            <div class="tag-option" data-tag="新贵家庭">新贵家庭</div>
                            <div class="tag-option" data-tag="知识精英">知识精英</div>
                            <div class="tag-option" data-tag="工薪阶层">工薪阶层</div>
                            <div class="tag-option" data-tag="艺术世家">艺术世家</div>
                            <div class="tag-option" data-tag="官宦背景">官宦背景</div>
                        </div>
                    </div>
                </div>
                <div class="tag-section">
                    <h2 class="section-title"><i>👣</i> 行为标签（显性表达）</h2>
                    <div class="tag-group">
                        <h3><i>🛒</i> 消费印记</h3>
                        <div class="tag-options" id="spend-options">
                            <div class="tag-option" data-tag="奢侈品">奢侈品</div>
                            <div class="tag-option" data-tag="知识付费">知识付费</div>
                            <div class="tag-option" data-tag="极简主义">极简主义</div>
                            <div class="tag-option" data-tag="冲动消费">冲动消费</div>
                            <div class="tag-option" data-tag="收藏癖好">收藏癖好</div>
                            <div class="tag-option" data-tag="体验至上">体验至上</div>
                            <div class="tag-option" data-tag="性价比控">性价比控</div>
                            <div class="tag-option" data-tag="品牌忠诚">品牌忠诚</div>
                        </div>
                    </div>
                    <div class="tag-group">
                        <h3><i>👥</i> 社交指纹</h3>
                        <div class="tag-options" id="social-options">
                            <div class="tag-option" data-tag="群聊主导者">群聊主导者</div>
                            <div class="tag-option" data-tag="倾听者">倾听者</div>
                            <div class="tag-option" data-tag="段子手">段子手</div>
                            <div class="tag-option" data-tag="社交回避">社交回避</div>
                            <div class="tag-option" data-tag="关系协调者">关系协调者</div>
                            <div class="tag-option" data-tag="意见领袖">意见领袖</div>
                            <div class="tag-option" data-tag="搭讪达人">搭讪达人</div>
                            <div class="tag-option" data-tag="聚会策划">聚会策划</div>
                        </div>
                    </div>
                    <div class="tag-group">
                        <h3><i>⏱️</i> 时间分配</h3>
                        <div class="tag-options" id="time-options">
                            <div class="tag-option" data-tag="夜间活跃">夜间活跃</div>
                            <div class="tag-option" data-tag="晨型人">晨型人</div>
                            <div class="tag-option" data-tag="碎片化">碎片化</div>
                            <div class="tag-option" data-tag="深度工作">深度工作</div>
                            <div class="tag-option" data-tag="多任务处理">多任务处理</div>
                            <div class="tag-option" data-tag="拖延大师">拖延大师</div>
                            <div class="tag-option" data-tag="严格日程">严格日程</div>
                            <div class="tag-option" data-tag="即兴生活">即兴生活</div>
                        </div>
                    </div>
                    <div class="tag-group">
                        <h3><i>📱</i> 数字肢体语言</h3>
                        <div class="tag-options" id="digital-options">
                            <div class="tag-option" data-tag="点赞狂魔">点赞狂魔</div>
                            <div class="tag-option" data-tag="已读不回">已读不回</div>
                            <div class="tag-option" data-tag="长文党">长文党</div>
                            <div class="tag-option" data-tag="表情包达人">表情包达人</div>
                            <div class="tag-option" data-tag="深夜发图">深夜发图</div>
                            <div class="tag-option" data-tag="头像常换">头像常换</div>
                            <div class="tag-option" data-tag="签名更新">签名更新</div>
                            <div class="tag-option" data-tag="群内潜水">群内潜水</div>
                        </div>
                    </div>
                    <div class="tag-group">
                        <h3><i>💪</i> 健康习惯</h3>
                        <div class="tag-options" id="health-options">
                            <div class="tag-option" data-tag="健身狂人">健身狂人</div>
                            <div class="tag-option" data-tag="养生达人">养生达人</div>
                            <div class="tag-option" data-tag="烟酒不沾">烟酒不沾</div>
                            <div class="tag-option" data-tag="咖啡依赖">咖啡依赖</div>
                            <div class="tag-option" data-tag="素食主义">素食主义</div>
                            <div class="tag-option" data-tag="规律作息">规律作息</div>
                            <div class="tag-option" data-tag="医疗恐惧">医疗恐惧</div>
                            <div class="tag-option" data-tag="运动新手">运动新手</div>
                        </div>
                    </div>
                    <div class="tag-group">
                        <h3><i>📚</i> 学习风格</h3>
                        <div class="tag-options" id="learning-options">
                            <div class="tag-option" data-tag="系统学习">系统学习</div>
                            <div class="tag-option" data-tag="碎片学习">碎片学习</div>
                            <div class="tag-option" data-tag="实践派">实践派</div>
                            <div class="tag-option" data-tag="理论派">理论派</div>
                            <div class="tag-option" data-tag="快速上手">快速上手</div>
                            <div class="tag-option" data-tag="深度钻研">深度钻研</div>
                            <div class="tag-option" data-tag="模仿学习">模仿学习</div>
                            <div class="tag-option" data-tag="独立探索">独立探索</div>
                        </div>
                    </div>
                    <div class="tag-group">
                        <h3><i>🧘</i> 压力应对</h3>
                        <div class="tag-options" id="stress-options">
                            <div class="tag-option" data-tag="积极解决">积极解决</div>
                            <div class="tag-option" data-tag="逃避现实">逃避现实</div>
                            <div class="tag-option" data-tag="寻求支持">寻求支持</div>
                            <div class="tag-option" data-tag="自我加压">自我加压</div>
                            <div class="tag-option" data-tag="运动释放">运动释放</div>
                            <div class="tag-option" data-tag="暴饮暴食">暴饮暴食</div>
                            <div class="tag-option" data-tag="冷静分析">冷静分析</div>
                            <div class="tag-option" data-tag="情绪爆发">情绪爆发</div>
                        </div>
                    </div>
                    <div class="tag-group">
                        <h3><i>🎨</i> 休闲偏好</h3>
                        <div class="tag-options" id="leisure-options">
                            <div class="tag-option" data-tag="户外探险">户外探险</div>
                            <div class="tag-option" data-tag="宅家休息">宅家休息</div>
                            <div class="tag-option" data-tag="电影迷">电影迷</div>
                            <div class="tag-option" data-tag="游戏爱好者">游戏爱好者</div>
                            <div class="tag-option" data-tag="阅读成瘾">阅读成瘾</div>
                            <div class="tag-option" data-tag="社交聚会">社交聚会</div>
                            <div class="tag-option" data-tag="艺术创作">艺术创作</div>
                            <div class="tag-option" data-tag="旅行达人">旅行达人</div>
                        </div>
                    </div>
                </div>
                <div class="btn-group">
                    <button type="button" id="backToTestBtn" class="submit-btn back-btn">上一步</button>
                    <button type="button" id="submitFinalBtn" class="submit-btn">生成我的人格报告</button>
                </div>
            </div>

            <!-- 最终结果页面 -->
            <div class="results hidden" id="results">
                <h2>我的人格画像</h2>
                <div id="results-content">
                    <!-- 结果将通过JavaScript动态生成 -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // 四液质标签和评分规则
        const temperamentTags = {
            sanguine: [
                { label: "社交", openness: 6, conscientiousness: 4, extraversion: 9, agreeableness: 7, neuroticism: 3 },
                { label: "活泼", openness: 6, conscientiousness: 3, extraversion: 9, agreeableness: 6, neuroticism: 3 },
                { label: "情绪波动", openness: 5, conscientiousness: 2, extraversion: 7, agreeableness: 5, neuroticism: 8 },
                { label: "精力旺盛", openness: 5, conscientiousness: 5, extraversion: 9, agreeableness: 5, neuroticism: 3 },
                { label: "乐观", openness: 7, conscientiousness: 4, extraversion: 8, agreeableness: 7, neuroticism: 2 },
                { label: "健谈", openness: 5, conscientiousness: 3, extraversion: 9, agreeableness: 6, neuroticism: 4 },
                { label: "随和", openness: 5, conscientiousness: 4, extraversion: 7, agreeableness: 8, neuroticism: 3 },
                { label: "寻求刺激", openness: 8, conscientiousness: 3, extraversion: 8, agreeableness: 5, neuroticism: 5 }
            ],
            choleric: [
                { label: "果断", openness: 5, conscientiousness: 8, extraversion: 8, agreeableness: 4, neuroticism: 5 },
                { label: "领导力", openness: 6, conscientiousness: 8, extraversion: 9, agreeableness: 5, neuroticism: 4 },
                { label: "野心", openness: 7, conscientiousness: 9, extraversion: 8, agreeableness: 3, neuroticism: 6 },
                { label: "自信", openness: 6, conscientiousness: 6, extraversion: 8, agreeableness: 5, neuroticism: 3 },
                { label: "竞争性", openness: 5, conscientiousness: 7, extraversion: 8, agreeableness: 3, neuroticism: 6 },
                { label: "目标导向", openness: 5, conscientiousness: 9, extraversion: 7, agreeableness: 4, neuroticism: 4 },
                { label: "急躁", openness: 4, conscientiousness: 5, extraversion: 7, agreeableness: 3, neuroticism: 7 },
                { label: "支配性", openness: 5, conscientiousness: 7, extraversion: 8, agreeableness: 2, neuroticism: 6 }
            ],
            melancholic: [
                { label: "敏感", openness: 7, conscientiousness: 6, extraversion: 2, agreeableness: 7, neuroticism: 9 },
                { label: "温柔", openness: 5, conscientiousness: 5, extraversion: 3, agreeableness: 9, neuroticism: 6 },
                { label: "封闭", openness: 6, conscientiousness: 5, extraversion: 1, agreeableness: 5, neuroticism: 7 },
                { label: "共情", openness: 7, conscientiousness: 5, extraversion: 3, agreeableness: 9, neuroticism: 6 },
                { label: "完美主义", openness: 6, conscientiousness: 9, extraversion: 3, agreeableness: 6, neuroticism: 8 },
                { label: "深思熟虑", openness: 8, conscientiousness: 8, extraversion: 2, agreeableness: 6, neuroticism: 5 },
                { label: "悲观", openness: 5, conscientiousness: 6, extraversion: 2, agreeableness: 7, neuroticism: 9 },
                { label: "理想主义", openness: 9, conscientiousness: 5, extraversion: 3, agreeableness: 7, neuroticism: 7 }
            ],
            phlegmatic: [
                { label: "冷静", openness: 4, conscientiousness: 7, extraversion: 4, agreeableness: 8, neuroticism: 2 },
                { label: "耐心", openness: 4, conscientiousness: 8, extraversion: 3, agreeableness: 9, neuroticism: 3 },
                { label: "稳定", openness: 3, conscientiousness: 8, extraversion: 4, agreeableness: 8, neuroticism: 2 },
                { label: "可靠", openness: 3, conscientiousness: 9, extraversion: 3, agreeableness: 8, neuroticism: 2 },
                { label: "平和", openness: 4, conscientiousness: 6, extraversion: 4, agreeableness: 9, neuroticism: 1 },
                { label: "规律", openness: 2, conscientiousness: 8, extraversion: 4, agreeableness: 6, neuroticism: 3 },
                { label: "避免冲突", openness: 3, conscientiousness: 5, extraversion: 3, agreeableness: 9, neuroticism: 4 },
                { label: "务实", openness: 4, conscientiousness: 8, extraversion: 4, agreeableness: 6, neuroticism: 3 },
                { label: "物质主导", openness: 1, conscientiousness: 7, extraversion: 4, agreeableness: 5, neuroticism: 3 },
                { label: "被动", openness: 3, conscientiousness: 2, extraversion: 2, agreeableness: 6, neuroticism: 3 },
                { label: "内敛", openness: 4, conscientiousness: 5, extraversion: 2, agreeableness: 7, neuroticism: 4 },
                { label: "非黑即白", openness: 2, conscientiousness: 7, extraversion: 6, agreeableness: 3, neuroticism: 5 }
            ]
        };

        // 生成判断题
        const questions = [];
        const allTags = [];

        // 收集所有标签
        Object.keys(temperamentTags).forEach(temperament => {
            temperamentTags[temperament].forEach(tagData => {
                allTags.push({
                    ...tagData,
                    temperament: temperament
                });
            });
        });

        // 生成判断题
        allTags.forEach(tag => {
            const question = {
                text: `我是一个${tag.label}的人`,
                tag: tag
            };
            questions.push(question);
        });

        // 星座标签
        const zodiacTags = {
            "白羊座": ["开拓者", "行动派", "竞争者", "急先锋", "无畏者"],
            "金牛座": ["守护者", "享乐家", "固执者", "品味家", "稳定器"],
            "双子座": ["沟通者", "好奇宝宝", "信息贩子", "多面手", "机智派"],
            "巨蟹座": ["保护者", "怀旧者", "情绪海绵", "家庭主厨", "安全感寻求者"],
            "狮子座": ["表演者", "慷慨者", "自恋者", "领袖", "聚光灯爱好者"],
            "处女座": ["完美主义者", "分析师", "细节控", "服务者", "洁癖"],
            "天秤座": ["平衡者", "优雅者", "犹豫者", "调解人", "美学爱好者"],
            "天蝎座": ["探索者", "神秘者", "洞察者", "激情者", "复仇者"],
            "射手座": ["冒险家", "哲学家", "自由者", "乐观者", "旅行者"],
            "摩羯座": ["攀登者", "现实者", "责任者", "保守派", "成就导向者"],
            "水瓶座": ["革新者", "人道主义者", "怪人", "未来主义者", "社交观察者"],
            "双鱼座": ["梦想家", "共情者", "逃避者", "艺术家", "救世主情结"]
        };

        // 五行属性
        const zodiacElementMap = {
            "白羊座": "火", "狮子座": "火", "射手座": "火",
            "金牛座": "土", "处女座": "土", "摩羯座": "土",
            "双子座": "风", "天秤座": "风", "水瓶座": "风",
            "巨蟹座": "水", "天蝎座": "水", "双鱼座": "水"
        };

        // 大五人格特殊机制
        const bigFiveMechanisms = {
            "白羊座": {
                traits: [
                    { trait: "开放性", high: "冒险催化剂", low: "常规依赖者", correction: "新挑战→开放性+35%" },
                    { trait: "尽责性", high: "行动型尽责", low: "计划蒸发者", correction: "紧迫感→尽责性+50%" },
                    { trait: "外向性", high: "能量辐射体", low: "独行侠", correction: "竞争场景→外向性异常高涨" },
                    { trait: "宜人性", high: "直率型友善", low: "攻击性表达", correction: "被误解→宜人性-20%" },
                    { trait: "神经质", high: "冲动接收器", low: "无畏镇定剂", correction: "挫败感→神经质+40%" }
                ],
                special: "当「冒险催化剂」与「能量辐射体」同时激活 → 触发「冲锋模式」"
            },
            "天蝎座": {
                traits: [
                    { trait: "开放性", high: "幻象酿酒师", low: "现实锚定者", correction: "深夜独处→开放性+45%" },
                    { trait: "尽责性", high: "情绪型尽责", low: "承诺蒸发者", correction: "恋人期待→尽责性+60%" },
                    { trait: "外向性", high: "共情海绵体", low: "能量枯竭者", correction: "受害者叙事→外向性异常高涨" },
                    { trait: "宜人性", high: "边界溶解者", low: "自我献祭癖", correction: "被求助→宜人性突破阈值" },
                    { trait: "神经质", high: "全频段接收器", low: "艺术镇定剂", correction: "阴雨天→神经质+30%" }
                ],
                special: "当「幻象酿酒师」与「艺术镇定剂」同时激活 → 产生高价值创造性作品"
            }
        };

        // 用于存储用户选择的后天和行为标签
        const userPostTags = {
            mbti: [],
            blood: [],
            event: [],
            career: [],
            class: [],
            spend: [],
            social: [],
            time: [],
            digital: [],
            health: [],
            learning: [],
            stress: [],
            leisure: []
        };

        // 页面加载完成后生成问题
        document.addEventListener('DOMContentLoaded', function() {
            const questionsContainer = document.getElementById('questions-container');
            
            // 生成问题
            questions.forEach((question, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.innerHTML = `
                    <h3>${index + 1}. ${question.text}</h3>
                    <div class="options">
                        <div class="option" data-value="yes" data-question="${index}">
                            <input type="radio" name="q${index}" id="yes${index}" style="display:none;">
                            <label for="yes${index}">是</label>
                        </div>
                        <div class="option" data-value="no" data-question="${index}">
                            <input type="radio" name="q${index}" id="no${index}" style="display:none;">
                            <label for="no${index}">否</label>
                        </div>
                    </div>
                    <input type="hidden" id="hidden-input-${index}">
                `;
                questionsContainer.appendChild(questionDiv);
            });

            // 为所有选项添加点击事件
            const optionElements = document.querySelectorAll('.option');
            optionElements.forEach(option => {
                option.addEventListener('click', function() {
                    const value = this.getAttribute('data-value');
                    const questionIndex = this.getAttribute('data-question');
                    
                    // 更新隐藏输入框
                    document.getElementById(`hidden-input-${questionIndex}`).value = value;
                    
                    // 更新UI
                    const options = this.parentElement.querySelectorAll('.option');
                    options.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    // 更新进度条
                    updateProgress();
                });
            });

            // ============ 新增页面的交互逻辑 ============
            const postTestPage = document.getElementById('post-test-page');
            const personalityForm = document.getElementById('personality-form');
            const nextToPostTestBtn = document.getElementById('nextToPostTestBtn');
            const backToTestBtn = document.getElementById('backToTestBtn');
            const submitFinalBtn = document.getElementById('submitFinalBtn');

            // 为所有可选项添加点击事件
            document.querySelectorAll('.tag-options').forEach(group => {
                const groupId = group.id;
                const options = group.querySelectorAll('.tag-option');
                options.forEach(option => {
                    option.addEventListener('click', function() {
                        const tag = this.getAttribute('data-tag');
                        const isSingleSelect = ['mbti', 'blood'].some(prefix => groupId.startsWith(prefix));
                        
                        if (isSingleSelect) {
                            // 单选逻辑 (MBTI, 血型)
                            options.forEach(opt => opt.classList.remove('selected', 'single-selected'));
                            this.classList.add('single-selected');
                            // 清空数组并添加新选择
                            userPostTags[groupId.replace('-options', '')] = [tag];
                        } else {
                            // 多选逻辑
                            this.classList.toggle('selected');
                            const tagList = userPostTags[groupId.replace('-options', '')];
                            const index = tagList.indexOf(tag);
                            if (this.classList.contains('selected')) {
                                if (index === -1) tagList.push(tag);
                            } else {
                                if (index > -1) tagList.splice(index, 1);
                            }
                        }
                    });
                });
            });

            // “进入下一步” 按钮
            nextToPostTestBtn.addEventListener('click', function() {
                // 验证第一部分
                const dobInput = document.getElementById('dob').value;
                if (!dobInput) {
                    alert('请填写出生日期');
                    return;
                }
                const unanswered = [];
                for (let i = 0; i < questions.length; i++) {
                    if (!document.querySelector(`#hidden-input-${i}`)) {
                        unanswered.push(i + 1);
                    }
                }
                if (unanswered.length > 0) {
                    alert(`还有 ${unanswered.length} 个问题未回答`);
                    return;
                }
                
                // 切换到后天标签页面
                personalityForm.classList.remove('active-page');
                postTestPage.style.display = 'block';
            });

            // “上一步” 按钮
            backToTestBtn.addEventListener('click', function() {
                postTestPage.style.display = 'none';
                personalityForm.classList.add('active-page');
            });

            // “生成我的人格报告” 按钮
            submitFinalBtn.addEventListener('click', function() {
                // 获取出生日期
                const dobInput = document.getElementById('dob').value;
                const dob = new Date(dobInput);
                if (!dob) {
                    alert('请填写有效的出生日期');
                    return;
                }

                // 获取星座和四液质结果
                const zodiac = getZodiac(dob);
                const temperament = getTemperamentResult();
                const bigFive = temperament.bigFiveScores;
                const zodiacElement = zodiacElementMap[zodiac] || "未知";

                // 生成并显示结果
                displayResults(zodiac, temperament, bigFive, zodiacElement, userPostTags);
            });

            // 更新进度条
            function updateProgress() {
                const totalQuestions = questions.length;
                const answeredQuestions = document.querySelectorAll('.option.selected').length;
                const progressPercent = (answeredQuestions / totalQuestions) * 100;
                document.getElementById('progress-bar').style.width = progressPercent + '%';
            }

            // 获取星座
            function getZodiac(dob) {
                const month = dob.getMonth() + 1;
                const day = dob.getDate();
                let sign = '';
                
                if ((month === 3 && day >= 21) || (month === 4 && day <= 19)) sign = "白羊座";
                else if ((month === 4 && day >= 20) || (month === 5 && day <= 20)) sign = "金牛座";
                else if ((month === 5 && day >= 21) || (month === 6 && day <= 20)) sign = "双子座";
                else if ((month === 6 && day >= 21) || (month === 7 && day <= 22)) sign = "巨蟹座";
                else if ((month === 7 && day >= 23) || (month === 8 && day <= 22)) sign = "狮子座";
                else if ((month === 8 && day >= 23) || (month === 9 && day <= 22)) sign = "处女座";
                else if ((month === 9 && day >= 23) || (month === 10 && day <= 22)) sign = "天秤座";
                else if ((month === 10 && day >= 23) || (month === 11 && day <= 21)) sign = "天蝎座";
                else if ((month === 11 && day >= 22) || (month === 12 && day <= 21)) sign = "射手座";
                else if ((month === 12 && day >= 22) || (month === 1 && day <= 19)) sign = "摩羯座";
                else if ((month === 1 && day >= 20) || (month === 2 && day <= 18)) sign = "水瓶座";
                else if ((month === 2 && day >= 19) || (month === 3 && day <= 20)) sign = "双鱼座";
                
                return sign;
            }

            // 计算四液质结果
            function getTemperamentResult() {
                const scores = { sanguine: 0, choleric: 0, melancholic: 0, phlegmatic: 0 };
                const bigFiveScores = { openness: 0, conscientiousness: 0, extraversion: 0, agreeableness: 0, neuroticism: 0 };
                
                for (let i = 0; i < questions.length; i++) {
                    const selectedValue = document.querySelector(`#hidden-input-${i}`)?.value;
                    if (selectedValue === 'yes') {
                        const tag = questions[i].tag;
                        // 四液质计分
                        scores[tag.temperament] += 1;
                        // 大五人格计分
                        bigFiveScores.openness += tag.openness;
                        bigFiveScores.conscientiousness += tag.conscientiousness;
                        bigFiveScores.extraversion += tag.extraversion;
                        bigFiveScores.agreeableness += tag.agreeableness;
                        bigFiveScores.neuroticism += tag.neuroticism;
                    }
                }
                
                // 将大五人格分数标准化到0-100范围
                const maxPossible = 40 * 9; // 40题 * 最高分9
                const minPossible = 0;
                const range = maxPossible - minPossible;
                const normalizedBigFive = {
                    openness: Math.round((bigFiveScores.openness / range) * 100),
                    conscientiousness: Math.round((bigFiveScores.conscientiousness / range) * 100),
                    extraversion: Math.round((bigFiveScores.extraversion / range) * 100),
                    agreeableness: Math.round((bigFiveScores.agreeableness / range) * 100),
                    neuroticism: Math.round((bigFiveScores.neuroticism / range) * 100)
                };
                
                // 找出最高的四液质
                let maxScore = 0;
                let dominantTemperament = '';
                Object.keys(scores).forEach(key => {
                    if (scores[key] > maxScore) {
                        maxScore = scores[key];
                        dominantTemperament = key;
                    }
                });
                
                return {
                    dominant: dominantTemperament,
                    scores: scores,
                    bigFiveScores: normalizedBigFive
                };
            }

            // 生成分析报告，所有标签都带有量化指标
            function generateAnalysis(postTags, bigFive, zodiac) {
                const analysis = {
                    personalityStructure: [],
                    environmentAdaptation: [],
                    entropyWarning: [],
                    optimizationStrategies: []
                };

                // --- 人格结构 (基于MBTI和核心特质) ---
                // 根据MBTI推断系统化思维
                if (postTags.mbti.includes('INTJ') || postTags.mbti.includes('ENTJ') || postTags.mbti.includes('ISTJ') || postTags.mbti.includes('ESTJ')) {
                    const systemScore = Math.min(100, 70 + bigFive.conscientiousness * 0.4);
                    analysis.personalityStructure.push(`高系统化思维倾向（系统整合力 ${systemScore}%）`);
                }
                // 根据MBTI推断情感表达
                if (postTags.mbti.includes('INTJ') || postTags.mbti.includes('ENTJ')) {
                    const emotionScore = 100 - bigFive.agreeableness;
                    analysis.personalityStructure.push(`架构者本能与情感雷达的动态平衡（情感折叠指数：${emotionScore}%）`);
                } else if (postTags.mbti.includes('INFP') || postTags.mbti.includes('ENFP')) {
                    const idealismScore = Math.min(100, 60 + bigFive.openness * 0.5);
                    analysis.personalityStructure.push(`理想主义愿景与现实落地的矛盾张力（理想主义指数：${idealismScore}%）`);
                }

                // --- 环境适应力 (基于职业、消费、休闲等) ---
                // 职业烙印
                if (postTags.career.includes('程序员')) {
                    const logicScore = Math.min(100, 60 + bigFive.conscientiousness * 0.5);
                    analysis.environmentAdaptation.push(`逻辑闭环能力 +${logicScore}%`);
                }
                if (postTags.career.includes('艺术家')) {
                    const creativeScore = Math.min(100, 50 + bigFive.openness * 0.7);
                    analysis.environmentAdaptation.push(`非线性创造力通道激活（创造力指数：${creativeScore}%）`);
                }
                if (postTags.career.includes('医生')) {
                    const stressScore = Math.min(100, 55 + bigFive.conscientiousness * 0.6);
                    analysis.environmentAdaptation.push(`高压决策耐受力 +${stressScore}%`);
                }
                // 休闲偏好
                if (postTags.leisure.includes('户外探险')) {
                    const uncertaintyScore = Math.min(100, 40 + bigFive.openness * 0.8);
                    analysis.environmentAdaptation.push(`环境不确定性耐受力 +${uncertaintyScore}%`);
                }
                if (postTags.leisure.includes('阅读成瘾')) {
                    const knowledgeScore = Math.min(100, 50 + bigFive.openness * 0.6);
                    analysis.environmentAdaptation.push(`知识获取效率 +${knowledgeScore}%`);
                }

                // --- 潜在熵增警告 (基于社会阶层、压力应对、健康习惯等) ---
                // 社会阶层
                if (postTags.class.includes('寒门出身')) {
                    const anxietyScore = Math.min(100, 50 + bigFive.neuroticism * 0.6);
                    analysis.entropyWarning.push(`向上流动焦虑指数：${anxietyScore}%`);
                }
                if (postTags.class.includes('富裕阶层')) {
                    const meaningScore = Math.min(100, 30 + bigFive.neuroticism * 0.4);
                    analysis.entropyWarning.push(`意义感真空风险 +${meaningScore}%`);
                }
                // 压力应对
                if (postTags.stress.includes('逃避现实')) {
                    const delayScore = Math.min(100, 40 + bigFive.neuroticism * 0.7);
                    analysis.entropyWarning.push(`问题解决延迟成本 +${delayScore}%`);
                }
                if (postTags.stress.includes('暴饮暴食')) {
                    const healthScore = Math.min(100, 35 + bigFive.neuroticism * 0.8);
                    analysis.entropyWarning.push(`健康风险增压 +${healthScore}%`);
                }
                // 健康习惯
                if (postTags.health.includes('医疗恐惧')) {
                    const riskScore = Math.min(100, 40 + bigFive.neuroticism * 0.6);
                    analysis.entropyWarning.push(`预防性医疗缺失风险 +${riskScore}%`);
                }

                // --- 优化策略 (基于学习风格、时间分配、数字行为等) ---
                // 学习风格
                if (postTags.learning.includes('系统学习')) {
                    const knowledgeScore = Math.min(100, 70 + bigFive.conscientiousness * 0.4);
                    analysis.optimizationStrategies.push(`知识图谱构建能力 +${knowledgeScore}%`);
                }
                if (postTags.learning.includes('碎片学习')) {
                    const integrationScore = Math.max(20, 50 - bigFive.conscientiousness * 0.5);
                    analysis.optimizationStrategies.push(`知识整合碎片化风险（整合效率：${integrationScore}%）`);
                }
                // 时间分配
                if (postTags.time.includes('夜间活跃')) {
                    const inspirationScore = Math.min(100, 50 + bigFive.openness * 0.6);
                    analysis.optimizationStrategies.push(`灵感峰值利用率 +${inspirationScore}%`);
                }
                if (postTags.time.includes('拖延大师')) {
                    const deadlineScore = Math.min(100, 45 + bigFive.neuroticism * 0.5);
                    analysis.optimizationStrategies.push(`deadline驱动型压力反应（效率：${deadlineScore}%）`);
                }
                // 数字肢体语言
                if (postTags.digital.includes('已读不回')) {
                    const boundaryScore = Math.min(100, 60 + bigFive.neuroticism * 0.4);
                    analysis.optimizationStrategies.push(`数字社交责任过载（边界维护指数：${boundaryScore}%）`);
                }
                if (postTags.digital.includes('表情包达人')) {
                    const expressionScore = Math.min(100, 40 + bigFive.openness * 0.7);
                    analysis.optimizationStrategies.push(`情感表达编码效率 +${expressionScore}%`);

                }
                // 压力应对
                if (postTags.stress.includes('运动释放')) {
                    const metabolismScore = Math.min(100, 50 + bigFive.extraversion * 0.5);
                    analysis.optimizationStrategies.push(`生理性压力代谢通道（效率：${metabolismScore}%）`);
                }
                if (postTags.stress.includes('寻求支持')) {
                    const supportScore = Math.min(100, 60 + bigFive.agreeableness * 0.5);
                    analysis.optimizationStrategies.push(`社会支持系统利用率 +${supportScore}%`);
                }

                // --- 基于大五人格的通用分析 ---
                // 神经质
                if (bigFive.neuroticism > 70) {
                    const criticalScore = bigFive.neuroticism;
                    analysis.entropyWarning.push(`神经质指数临界值 ${criticalScore}% (高风险)`);
                } else if (bigFive.neuroticism > 50) {
                    const moderateScore = bigFive.neuroticism;
                    analysis.entropyWarning.push(`神经质指数 ${moderateScore}% (中等)`);
                }
                // 开放性
                if (bigFive.openness > 70) {
                    const innovationScore = bigFive.openness;
                    analysis.environmentAdaptation.push(`创新思维活跃度 +${innovationScore}%`);
                }
                // 尽责性
                if (bigFive.conscientiousness < 40) {
                    const fragilityScore = 100 - bigFive.conscientiousness;
                    analysis.entropyWarning.push(`目标执行链条脆弱（脆弱度：${fragilityScore}%）`);
                }

                // 添加一些基于星座的量化标签
                if (zodiac === "天蝎座") {
                    const depthScore = Math.min(100, 60 + bigFive.neuroticism * 0.5);
                    analysis.optimizationStrategies.push(`情感深度资源激活（深度：${depthScore}%）`);
                }
                if (zodiac === "双子座") {
                    const bandwidthScore = Math.min(100, 50 + bigFive.openness * 0.6);
                    analysis.environmentAdaptation.push(`信息处理带宽 +${bandwidthScore}%`);
                }

                // 添加通用标签作为兜底，也进行量化
                analysis.personalityStructure.push(`精密编码的情感表达机制（编码复杂度：75%）`);
                analysis.personalityStructure.push(`风险预判与机会捕捉双重驱动（平衡指数：60%）`);
                analysis.environmentAdaptation.push(`跨界适应力 +${Math.min(100, 40 + bigFive.openness * 0.7)}%`);
                analysis.environmentAdaptation.push(`情感表达畅通度 -${Math.max(10, 25 - bigFive.agreeableness * 0.3)}%`);
                analysis.entropyWarning.push(`心流体验减压 -${Math.min(80, 20 + bigFive.openness * 0.8)}%`);
                analysis.optimizationStrategies.push(`建立情感直输通道（降低编码能耗 ${Math.max(10, 30 - bigFive.neuroticism * 0.4)}%）`);
                analysis.optimizationStrategies.push(`实施反完美主义训练计划（减压 ${Math.max(15, 25 - bigFive.neuroticism * 0.3)}%）`);

                return analysis;
            }

            // 显示结果
            function displayResults(zodiac, temperament, bigFive, zodiacElement, postTags) {
                const resultsDiv = document.getElementById('results');
                const resultsContent = document.getElementById('results-content');
                
                // 生成分析
                const analysisResult = generateAnalysis(postTags, bigFive, zodiac);
                
                // 人格类型标签 (示例，也可以量化)
                const personalityTypeLabels = ["矛盾协调型人格(高)", "动态平衡架构师(中)", "风险感知型创新者(高)", "情感折叠型表达者(中高)"];
                // 核心特质标签
                const coreTraitLabels = ["系统整合者(92%)", "跨界适应者(78%)", "熵值管理者(65%)", "矛盾协调者(85%)"];
                // 发展潜力标签
                const potentialLabels = ["认知弹性潜力值：★★★★☆", "情感表达潜力值：★★★☆☆", "压力耐受潜力值：★★★★★", "创新突破潜力值：★★★★☆"];
                // 关系模式标签
                const relationshipLabels = ["情感价值交换者(高)", "深度连接探索者(中)", "社交能量管理者(中高)", "边界守护者(高)"];

                // 构建结果HTML
                resultsContent.innerHTML = `
                    <!-- 星座与四液质 -->
                    <div class="result-item">
                        <h3><i>🌟</i> 星座与五行</h3>
                        <p><strong>你的星座：</strong> ${zodiac}</p>
                        <p><strong>五行属性：</strong> ${zodiacElement}</p>
                        <div class="tags">
                            ${zodiacTags[zodiac].map(tag => `<span class="tag">${tag}</span>`).join('')}
                        </div>
                    </div>

                    <!-- 四液质 -->
                    <div class="result-item">
                        <h3><i>🧪</i> 四液质分析</h3>
                        <p><strong>主导气质：</strong> ${temperament.dominant === 'sanguine' ? '多血质' : 
                                                  temperament.dominant === 'choleric' ? '胆汁质' : 
                                                  temperament.dominant === 'melancholic' ? '抑郁质' : '粘液质'}</p>
                        <div class="bar-container">
                            <div class="bar" style="width: ${((temperament.scores.sanguine / 8) * 100)}%">多血质 ${temperament.scores.sanguine}/8</div>
                        </div>
                        <div class="bar-container">
                            <div class="bar" style="width: ${((temperament.scores.choleric / 8) * 100)}%">胆汁质 ${temperament.scores.choleric}/8</div>
                        </div>
                        <div class="bar-container">
                            <div class="bar" style="width: ${((temperament.scores.melancholic / 8) * 100)}%">抑郁质 ${temperament.scores.melancholic}/8</div>
                        </div>
                        <div class="bar-container">
                            <div class="bar" style="width: ${((temperament.scores.phlegmatic / 12) * 100)}%">粘液质 ${temperament.scores.phlegmatic}/12</div>
                        </div>
                    </div>

                    <!-- 大五人格 -->
                    <div class="result-item">
                        <h3><i>📊</i> 大五人格维度</h3>
                        <table class="dimension-table">
                            <tr>
                                <th>维度</th>
                                <th>得分</th>
                                <th>解读</th>
                            </tr>
                            <tr>
                                <td>开放性</td>
                                <td>${bigFive.openness}</td>
                                <td>${bigFive.openness > 70 ? '高度开放，富有想象力和创造力' : 
                                    bigFive.openness > 50 ? '中等偏上，乐于接受新事物' : 
                                    bigFive.openness > 30 ? '中等，偏好熟悉的事物' : '较低，偏好传统和常规'}</td>
                            </tr>
                            <tr>
                                <td>尽责性</td>
                                <td>${bigFive.conscientiousness}</td>
                                <td>${bigFive.conscientiousness > 70 ? '高度自律，做事有条理' : 
                                    bigFive.conscientiousness > 50 ? '中等偏上，较为可靠' : 
                                    bigFive.conscientiousness > 30 ? '中等，有时会拖延' : '较低，比较随性'}</td>
                            </tr>
                            <tr>
                                <td>外向性</td>
                                <td>${bigFive.extraversion}</td>
                                <td>${bigFive.extraversion > 70 ? '非常外向，精力充沛' : 
                                    bigFive.extraversion > 50 ? '中等偏上，喜欢社交' : 
                                    bigFive.extraversion > 30 ? '中等，内外向平衡' : '较低，偏好独处'}</td>
                            </tr>
                            <tr>
                                <td>宜人性</td>
                                <td>${bigFive.agreeableness}</td>
                                <td>${bigFive.agreeableness > 70 ? '非常友善，乐于合作' : 
                                    bigFive.agreeableness > 50 ? '中等偏上，比较随和' : 
                                    bigFive.agreeableness > 30 ? '中等，有自己的主见' : '较低，比较直接'}</td>
                            </tr>
                            <tr>
                                <td>神经质</td>
                                <td>${bigFive.neuroticism}</td>
                                <td>${bigFive.neuroticism > 70 ? '情绪波动较大，容易焦虑' : 
                                    bigFive.neuroticism > 50 ? '中等偏上，情绪较敏感' : 
                                    bigFive.neuroticism > 30 ? '中等，情绪较为稳定' : '非常稳定，不易焦虑'}</td>
                            </tr>
                        </table>
                        ${bigFiveMechanisms[zodiac] ? `
                        <div class="special-mechanism">
                            <h4>✨ ${zodiac} 特殊机制</h4>
                            <p>${bigFiveMechanisms[zodiac].special}</p>
                        </div>` : ''}
                    </div>

                    <!-- 人格类型标签 -->
                    <div class="result-item">
                        <h3><i>👤</i> 人格类型标签</h3>
                        <div class="tags">
                            ${personalityTypeLabels.map(label => `<span class="tag">${label}</span>`).join('')}
                        </div>
                    </div>

                    <!-- 人格结构 -->
                    <div class="result-item">
                        <h3><i>🧩</i> 人格结构</h3>
                        <div class="tags">
                            ${analysisResult.personalityStructure.map(label => `<span class="tag">${label}</span>`).join('')}
                        </div>
                    </div>

                    <!-- 环境适应力 -->
                    <div class="result-item">
                        <h3><i>🌍</i> 环境适应力</h3>
                        <div class="tags">
                            ${analysisResult.environmentAdaptation.map(label => `<span class="tag">${label}</span>`).join('')}
                        </div>
                    </div>

                    <!-- 核心特质标签 -->
                    <div class="result-item">
                        <h3><i>🎯</i> 核心特质标签</h3>
                        <div class="tags">
                            ${coreTraitLabels.map(label => `<span class="tag">${label}</span>`).join('')}
                        </div>
                    </div>

                    <!-- 潜在熵增警告 -->
                    <div class="result-item">
                        <h3><i>⚠️</i> 潜在熵增警告</h3>
                        <div class="tags">
                            ${analysisResult.entropyWarning.map(label => `<span class="tag">${label}</span>`).join('')}
                        </div>
                    </div>

                    <!-- 优化策略 -->
                    <div class="result-item">
                        <h3><i>🔧</i> 优化策略</h3>
                        <div class="tags">
                            ${analysisResult.optimizationStrategies.map(label => `<span class="tag">${label}</span>`).join('')}
                        </div>
                    </div>

                    <!-- 发展潜力标签 -->
                    <div class="result-item">
                        <h3><i>🚀</i> 发展潜力标签</h3>
                        <div class="tags">
                            ${potentialLabels.map(label => `<span class="tag">${label}</span>`).join('')}
                        </div>
                    </div>

                    <!-- 关系模式标签 -->
                    <div class="result-item">
                        <h3><i>🤝</i> 关系模式标签</h3>
                        <div class="tags">
                            ${relationshipLabels.map(label => `<span class="tag">${label}</span>`).join('')}
                        </div>
                    </div>
                `;
                
                resultsDiv.classList.remove('hidden');
                document.getElementById('post-test-page').style.display = 'none';
            }
        });
    </script>
</body>
</html>
